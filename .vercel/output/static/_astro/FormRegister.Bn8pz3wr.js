import{r as d}from"./index.BVOCwoKb.js";var j={exports:{}},p={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var v;function q(){if(v)return p;v=1;var n=Symbol.for("react.transitional.element"),s=Symbol.for("react.fragment");function o(h,t,r){var u=null;if(r!==void 0&&(u=""+r),t.key!==void 0&&(u=""+t.key),"key"in t){r={};for(var m in t)m!=="key"&&(r[m]=t[m])}else r=t;return t=r.ref,{$$typeof:n,type:h,key:u,ref:t!==void 0?t:null,props:r}}return p.Fragment=s,p.jsx=o,p.jsxs=o,p}var w;function C(){return w||(w=1,j.exports=q()),j.exports}var e=C();function T(){return e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-send",children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("path",{d:"M10 14l11 -11"}),e.jsx("path",{d:"M21 3l-6.5 18a.55 .55 0 0 1 -1 0l-3.5 -7l-7 -3.5a.55 .55 0 0 1 0 -1l18 -6.5"})]})}function L(){return e.jsx("svg",{fill:"currentColor",viewBox:"0 0 24 24",className:"icon",children:e.jsx("path",{clipRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25zm4.28 10.28a.75.75 0 000-1.06l-3-3a.75.75 0 10-1.06 1.06l1.72 1.72H8.25a.75.75 0 000 1.5h5.69l-1.72 1.72a.75.75 0 101.06 1.06l3-3z",fillRule:"evenodd"})})}const A=async()=>{try{const n=await fetch("/pqrs/api/tipos"),s=await n.json();return n.ok?s:s.error}catch{return"Error de red al obtener los tipos de solicitud"}},M=async n=>{try{const s=await fetch("/pqrs/api/registrar",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}),o=await s.json();return s.ok?o:o.error}catch{return"El servicio de registro está caído, por favor intente más tarde"}};function D(){const[n,s]=d.useState([]),[o,h]=d.useState(!1),[t,r]=d.useState(null),[u,m]=d.useState(!1),[y,N]=d.useState(null);d.useEffect(()=>{A().then(l=>{Array.isArray(l)?s(l):r("Error al cargar las opciones de solicitud")}).catch(()=>{r("El servicio de registro está caído, por favor intente más tarde")})},[]);const S=a=>{const l=["puta","puto","put@","put*","put#","mierda","imbécil","imbecil","estúpido","estupido","estúpida","estupida","pendejo","pendeja","idiota","malparido","malparida","gonorrea","gonorre@","gonorr@","cabron","cabrón","cabrona","culero","culera","verga","verg@","coño","joder","hpta","marica","marico","perra","perro","zorra","zorro","imbecil","imbécil","maldito","maldita","mamón","mamona","culo","chingada","chingado","chingar","mierdero","mierd@","hdp"];r(null),a.preventDefault();const E=new FormData(a.currentTarget),c=Object.fromEntries(E.entries()),i=[],x=String(c.nombre||"").trim();x?/^[a-zA-ZáéíóúÁÉÍÓÚñÑ\s]+$/.test(x)?x.split(/\s+/).length<2&&i.push("Debe ingresar al menos nombre y apellido."):i.push("El nombre solo debe contener letras y espacios, sin caracteres especiales."):i.push("El nombre es requerido.");const f=String(c.cedula||"").trim();f?/^\d{5,}$/.test(f)||i.push("La cédula debe contener solo números y al menos 5 dígitos."):i.push("La cédula es requerida.");const g=String(c.descripcion||"").trim();if(g.length<10)i.push("La descripción debe tener al menos 10 caracteres.");else{const b=g.toLowerCase();l.some(R=>b.includes(R))&&i.push("La descripción contiene lenguaje inapropiado.")}if(i.length>0){r(i.join(`
`));return}h(!0);const k={name:x,asociado:Number(f),email:String(c.correo||"").trim(),phone:String(c.celular||"").trim(),description:g,userCreated:"web",typePQRS:Number(c.tipo)};M(k).then(b=>{console.log(b),m(!0),N(b.num)}).catch(()=>{r("Ocurrió un error al enviar la solicitud. Por favor, inténtelo más tarde.")})};return e.jsx("div",{children:u?e.jsxs("div",{className:"flex flex-col justify-center items-center max-w-4xl mx-auto mt-8 bg-white shadow-md rounded-xl p-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-blue-900 mb-4 text-center",children:"¡Solicitud enviada con éxito!"}),e.jsx("p",{children:"Su numero de registro es:"}),e.jsx("p",{className:"text-3xl bg-[#2F539F] text-white px-6 py-2 rounded-xl m-4",children:y}),e.jsx("p",{className:"text-gray-700 text-center",children:"Gracias por contactarnos. Nos pondremos en contacto contigo lo antes posible."})]}):e.jsxs("form",{className:"max-w-4xl mx-auto mt-8 bg-white shadow-md rounded-xl p-6",onSubmit:S,children:[e.jsxs("div",{className:"flex flex-col md:grid md:grid-cols-2 gap-x-10 gap-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-blue-900",children:"Nombre completo"}),e.jsx("input",{type:"text",id:"nombre",name:"nombre",required:!0,className:"mt-1 w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-indigo-500 focus:border-indigo-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-blue-900",children:"Cédula"}),e.jsx("input",{type:"text",id:"cedula",name:"cedula",required:!0,className:"mt-1 w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-indigo-500 focus:border-indigo-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-blue-900",children:"Correo electrónico"}),e.jsx("input",{type:"email",id:"correo",name:"correo",required:!0,className:"mt-1 w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-indigo-500 focus:border-indigo-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-blue-900",children:"Celular"}),e.jsx("input",{type:"tel",id:"celular",name:"celular",required:!0,pattern:"\\d{10}",maxLength:10,inputMode:"numeric",title:"El número debe tener exactamente 10 dígitos",className:"mt-1 w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-indigo-500 focus:border-indigo-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-blue-900",children:"Tipo de solicitud"}),e.jsxs("select",{id:"tipo",name:"tipo",required:!0,className:"mt-1 w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-indigo-500 focus:border-indigo-500",children:[e.jsx("option",{value:"",children:"Seleccione una opción"}),n.map((a,l)=>e.jsx("option",{value:a.id,children:a.name},l))]})]})]}),e.jsxs("div",{className:"mt-10",children:[e.jsx("label",{className:"block text-sm font-semibold text-blue-900",children:"Descripción"}),e.jsx("textarea",{id:"descripcion",name:"descripcion",rows:5,required:!0,className:"mt-1 w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Describe aquí tu solicitud con el mayor detalle posible..."})]}),e.jsxs("div",{className:"relative w-full flex flex-col items-center justify-center mt-4",children:[t&&e.jsx("p",{className:"text-red-500 text-sm mb-4 font-semibold text-center",children:t}),e.jsxs("button",{disabled:o,className:`w-fit items-center justify-center transition-all duration-300 ${o?"button-disabled":"button"}`,type:"submit",children:[o?"Enviando...":"Enviar",o?e.jsx(T,{}):e.jsx(L,{})]})]})]})})}export{D as default};
